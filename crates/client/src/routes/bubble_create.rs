// POST https://stanfordohs.pronto.io/api/v1/bubble.create
// Request = {"title":"test","organization_id":2245}
// Response = {"ok":true,"bubble":{"id":3844880,"user_id":5302428,"title":"test","iconurl":null,"channelcode":"3fSwDVzZoPsJJNEFWSPUaSEarSKuU4NrQEfJay6B","created_at":"2024-10-05 04:54:13","updated_at":"2024-10-05 04:54:13","livestream_id":null,"recordlivestream":false,"videosession_id":null,"organization_id":2245,"isdm":false,"voice_only":false,"category_id":null,"deleteanymessage":"owner","changetitle":"owner","grantchangetitle":true,"changecategory":"owner","grantchangecategory":true,"addmember":"member","grantaddmember":true,"removemember":"member","grantremovemember":true,"leavegroup":"member","grantleavegroup":true,"deletegroup":"owner","videosessionrecordlocal":"member","grantvideosessionrecordlocal":true,"videosessionrecordcloud":"member","grantvideosessionrecordcloud":true,"setrole":"owner","archived":0,"translation_enabled":true,"externalid":null,"async_reactions_enabled":false,"async_read_receipts_enabled":false,"async_mentions_enabled":false,"is_supergroup":false,"create_announcement":"owner","grant_create_announcement":true,"create_message":"member","grant_create_message":true,"assign_task":"member","grant_assign_task":true,"create_videosession":"member","grant_create_videosession":true,"pinned_message_id":null,"pinned_message_user_id":null,"pinned_message_expires_at":null,"pinned_message_at":null,"pin_message":"owner","grant_pin_message":true,"dmpartner":null,"category":null,"tasks_enabled":true,"organization":{"id":2245,"name":"Stanford Online High School","created_at":"2022-05-23 21:21:47","updated_at":"2024-08-29 21:50:51","profilepic":1,"profilepicupdated":"2023-04-25 02:01:06","tasks_enabled":true,"uuid":"5a688730dade11ec9efe71a87fba95ed","deleteanymessage":null,"changetitle":null,"grantchangetitle":null,"changecategory":null,"grantchangecategory":null,"addmember":null,"grantaddmember":null,"removemember":null,"grantremovemember":null,"leavegroup":null,"grantleavegroup":null,"deletegroup":null,"videosessionrecordlocal":null,"grantvideosessionrecordlocal":null,"videosessionrecordcloud":null,"grantvideosessionrecordcloud":null,"setrole":null,"shortname":"stanfordohs","url":null,"logo":null,"announcements_enabled":true,"grant_create_announcement":true,"grant_create_group":true,"grant_add_user":true,"grant_search_org":true,"grant_create_dm":true,"create_announcement":"manager","create_group":"user","add_user":"admin","search_org":"user","create_dm":"user","integrations_enabled":true,"grant_delete_any_announcement":true,"delete_any_announcement":"admin","meetings_enabled":true,"audio_messages_enabled":true,"maxstreams":10,"imports_enabled":true,"search_enabled":true,"create_api_tokens":"admin","bubble_membership_cap":3000,"badgecount_writing_enabled":1,"badgecount_reading_enabled":1,"experimental_notifications_enabled":0,"supergroups_enabled":true,"meetings_captions_enabled":false,"giphy_rating":"PG-13","user_title_enabled":false,"user_pronouns_enabled":true,"categories":[{"id":670656,"color":null,"sortorder":29,"title":"OHS - home of Pixels"},{"id":679345,"color":null,"sortorder":149,"title":"Clubs"},{"id":751065,"color":null,"sortorder":222,"title":"HRMCK - Homeroom: Model UN Club - S2"},{"id":850026,"color":null,"sortorder":299,"title":"UM150 - Multivariable Calculus* - S1 - 2024-2025"},{"id":850027,"color":null,"sortorder":300,"title":"HRM12Q - Homeroom: Topic Group Q - S1 - 2024-2025"},{"id":868001,"color":null,"sortorder":342,"title":"UM51A - UN Linear Algebra* - S1 - 2024-2025"}],"permissions":{"DEPRECATED":"Don't use this permissions object anymore.","create_announcement":"manager","create_group":"user","add_user":"admin","search_org":"user"},"profilepicurl":"https:\/\/files.chat.trypronto.com\/files\/orgs\/2245\/profilepic?pronto_time=1682388066","profilepicpath":"\/files\/orgs\/2245\/profilepic?pronto_time=1682388066","create_group_announcement":"admin","grant_create_group_announcement":false},"memberships":[{"id":42193609,"user_id":5302428,"bubble_id":3844880,"mark":0,"friends":true,"system":true,"mute":false,"created_at":"2024-10-05 04:54:13","updated_at":"2024-10-05 04:54:13","markupdated":"2024-10-05 04:54:13","isdropin":false,"banned":false,"reactions":true,"notificationrollup":true,"removedby":null,"muteuntil":null,"is_pinned":false,"supergroup_alert_seen":false,"role":"owner","snooze":null,"user":{"id":5302428,"firstname":"Ashwin","lastname":"Naren","username":null,"locale":"en_US","lastseen":"2024-10-05 04:54:13","profilepic":true,"status":0,"created_at":"2023-08-04 00:44:12","updated_at":"2024-10-05 04:48:45","deactivated_at":null,"email_verified_at":"2024-09-25 02:40:01","phone_verified_at":null,"isverified":false,"dropinorder":0,"maxstreams":10,"autotranslate":false,"isonline":true,"lastpresencetime":"2024-10-05 04:48:02","acceptedtos":"2024-09-25 02:40:01","sentwelcomemsg":"2023-08-15 19:22:02","role":"user","mute":false,"muteuntil":null,"isbot":0,"fullname":"Ashwin Naren","hasactivity":true,"inactive":false,"language":"en","permissions":{"change_name":"system","change_email":"system","change_phone":"system","remove_user":"system","change_title":"admin","change_pronouns":"admin","change_own_name":false,"change_own_email":false,"change_own_phone":false,"change_own_title":true,"change_own_pronouns":true},"profilepicpath":"\/files\/users\/5302428\/profilepic?pronto_time=1695523284","profilepicurl":"https:\/\/files.chat.trypronto.com\/files\/users\/5302428\/profilepic?pronto_time=1695523284"}}],"users":[{"id":5302428,"firstname":"Ashwin","lastname":"Naren","username":null,"locale":"en_US","lastseen":"2024-10-05 04:54:13","profilepic":true,"status":0,"created_at":"2023-08-04 00:44:12","updated_at":"2024-10-05 04:48:45","deactivated_at":null,"email_verified_at":"2024-09-25 02:40:01","phone_verified_at":null,"isverified":false,"dropinorder":0,"maxstreams":10,"autotranslate":false,"isonline":true,"lastpresencetime":"2024-10-05 04:48:02","acceptedtos":"2024-09-25 02:40:01","sentwelcomemsg":"2023-08-15 19:22:02","role":"user","mute":false,"muteuntil":null,"isbot":0,"fullname":"Ashwin Naren","hasactivity":true,"inactive":false,"language":"en","permissions":{"change_name":"system","change_email":"system","change_phone":"system","remove_user":"system","change_title":"admin","change_pronouns":"admin","change_own_name":false,"change_own_email":false,"change_own_phone":false,"change_own_title":true,"change_own_pronouns":true},"profilepicpath":"\/files\/users\/5302428\/profilepic?pronto_time=1695523284","profilepicurl":"https:\/\/files.chat.trypronto.com\/files\/users\/5302428\/profilepic?pronto_time=1695523284"}]},"stats":[{"bubble_id":3844880,"mark":90845817,"updated":"2024-10-05 04:54:14","unread":0,"unread_mentions":0,"latest_message_id":90845817,"latest_message_created_at":"2024-10-05 04:54:14","unclaimed_task_count":0}]}

use serde::{Deserialize, Serialize};
use crate::Bubble;

#[derive(Clone, Debug, Serialize, Deserialize)]
pub struct PostBubbleCreateRequest {
    pub title: String,
    pub organization_id: u64,
}

#[derive(Clone, Debug, Serialize, Deserialize)]
pub struct PostBubbleCreateResponse {
    pub ok: bool,
    pub bubble: Bubble,
}

pub type PostBubbleCreateResult = crate::APIResult<PostBubbleCreateResponse>;

client_macros::api!(post, "v1/bubble.create", PostBubbleCreateResult, PostBubbleCreateRequest);
